import{_ as Te,u as Se,b as $e,d as r,k as Ve,r as Z,e as K,o as v,c as f,f as C,a as t,n as M,i as B,q as ee,t as j,F as te,l as le,g as i,m as q,v as A,p as ze,j as Le}from"./index-430f7254.js";import{e as Me}from"./EventBus-e5c1ebb2.js";const p=E=>(ze("data-v-41d30a1a"),E=E(),Le(),E),Fe={class:"flex flex-col h-full overflow-auto bg-[--theme-color]"},Ie={key:0},Re={class:"flex w-auto mx-[10vw] mt-[30px]",id:"phoneshow"},Ue=["onClick"],Be={class:"font-black text-[26px] pb-[5px]"},Ee={key:0},Oe={key:0,class:"text-[14px]"},Ne={class:"mx-[30px] my-[25px] flex flex-col text-[--theme-text-major-color]"},Ye={class:"flex items-center justify-between"},Je={class:"flex mb-[10px] text-[24px] font-black select-none transition-all"},Ke=p(()=>t("div",{class:"flex h-full text-[12px] text-[--theme-text-major-color-tip]"},[t("p",{class:"text-left"},"任务请勿重名喔，保存的任务日历点击按钮更新到任务清单中哦")],-1)),qe=p(()=>t("i",{class:"iconfont",style:{"font-size":"24px"}},"",-1)),Ae=[qe],Ge={class:"w-full"},He={class:"flex items-center"},Pe=["onClick"],Qe={class:"h-full flex items-center"},We={class:"flex items-center h-full mx-[20px] text-[12px] text-[--theme-text-major-color-tip]"},Xe={class:"text-left"},Ze=["onClick"],et=p(()=>t("i",{class:"iconfont"},"",-1)),tt=[et],lt={class:"flex items-center justify-center my-[15px] select-none mx-[-15px] px-[15px] rounded-2xl"},ot={class:"flex items-center"},nt={class:"h-full bg-[--theme-text-major-color-input] rounded-2xl mx-[20px]"},at=p(()=>t("i",{class:"iconfont",style:{"font-size":"40px"}},"",-1)),st=[at],it={class:"h-full bg-[--theme-text-major-color-input] rounded-2xl mx-[20px]"},rt={key:1,id:"listdesc",class:"my-[30px] overflow-auto"},ct={key:0,class:"mx-[30px] flex flex-col"},ut={class:"flex justify-between items-center my-[25px]"},dt={class:"text-[--theme-text-major-color] text-[24px] font-black"},vt=p(()=>t("i",{class:"iconfont",style:{"font-size":"24px"}},"",-1)),ft=[vt],xt={class:"flex text-[14px] font-black overflow-hidden cursor-pointer select-none"},mt={key:0,class:"w-full h-full flex justify-center items-center transition-all duration-1000 absolute pointer-events-none"},pt={class:"flex overflow-hidden"},bt={class:"flex text-[14px] mt-[15px] font-black overflow-hidden cursor-pointer select-none"},ht={class:"w-[150px] h-[40px] bg-[--theme-text-major-color-input] mr-[10px] flex justify-center items-center rounded-3xl text-[--theme-text-major-color] hover:bg-[--theme-class-major-color-hover] active:text-[--theme-text-major-color-active]"},gt={class:"flex items-center justify-center"},yt=p(()=>t("p",{class:"w-[30px] mt-[22px] mr-[5px] text-[--theme-text-major-color]"},"到",-1)),kt={class:"flex text-[14px] mt-[15px] font-black overflow-hidden cursor-pointer select-none"},_t={class:"w-[150px] h-[40px] bg-[--theme-text-major-color-input] mr-[10px] flex justify-center items-center rounded-3xl text-[--theme-text-major-color] hover:bg-[--theme-class-major-color-hover] active:text-[--theme-text-major-color-active]"},wt={class:"flex my-[25px] flex-col text-[--theme-text-major-color] select-none"},Ct=p(()=>t("p",{class:"flex mb-[10px] text-[14px] select-none"},"备注",-1)),jt={class:"flex flex-col text-[--theme-text-major-color]"},Dt=p(()=>t("p",{class:"flex mb-[10px] text-[14px] select-none"},"子任务",-1)),Tt={class:"w-full"},St=["onUpdate:modelValue"],$t=["onClick"],Vt={class:"flex items-center my-[5px] relative select-none bg-[--theme-text-major-color-input] mx-[-15px] px-[15px] rounded-2xl"},zt={class:"w-[22px] h-full"},Lt=p(()=>t("i",{class:"iconfont",style:{"font-size":"22px"}},"",-1)),Mt=[Lt],Ft={class:"flex my-[25px] flex-col text-[--theme-text-major-color] select-none"},It=p(()=>t("p",{class:"flex mb-[10px] text-[14px] select-none"},"附件",-1)),Rt={class:"border-dotted border-2 border-[--theme-text-major-color] rounded"},Ut=p(()=>t("p",{class:"text-[--theme-text-major-color]"},"点击此处上传文件",-1)),Bt={__name:"TaskCalendar",setup(E){const ce=Se();$e();const h=r(new Date);new Date().getDate();const g=r(0),O=r(0),D=r(0),y=r(),k=r();Ve(()=>{X(),G(),H(),Y()});let n=JSON.parse(localStorage.getItem("mainData")),u,T=r(0),s=n.Calendar[T.value];const N=r(0),_=r(0),Y=()=>{let l=[],e=new Date().getTime();for(let a=0;a<n.Calendar.length;a++)e>=new Date(n.Calendar[a].startTime).getTime()&&e<=new Date(n.Calendar[a].endTime).getTime()+1e3*60*60*24-1&&l.push(n.Calendar[a]);if(l.length==0)for(let a=0;a<n.tableData.length;a++)n.tableData[a].taskclass=="Calendar"&&n.tableData.splice(a,1);else for(let a=0;a<l.length;a++)n.tableData.map(function(b){return b.name}).indexOf(l[a].name)!=-1?n.tableData[n.tableData.map(function(b){return b.name}).indexOf(l[a].name)]=l[a]:n.tableData.map(function(b){return b.name}).indexOf(l[a].name)==-1&&n.tableData.push(l[a]);H()},d=()=>{g.value=0,setTimeout(()=>{g.value=1},0),localStorage.setItem("mainData",JSON.stringify(n)),console.log("datas have updated")},F=r(1);let w=Z([]);const S=()=>{let l=[],e="",a=h.value.getFullYear(),b=h.value.getMonth()+1;for(let U=0;U<32;U++){e=a+"-"+b+"-"+U;for(let $=0;$<n.Calendar.length;$++)new Date(e).getTime()>=new Date(n.Calendar[$].startTime).getTime()&&new Date(e)<=new Date(n.Calendar[$].endTime)&&l.push(n.Calendar[$].name);w.push(l),l=[]}F.value=0,setTimeout(()=>{F.value=1})};S();const oe=l=>{if(l==1){if(_.value==1)return"width:300px";if(_.value==0&&N.value==1)return"width:700px";if(_.value==0&&N.value==0)return"width:1200px"}else if(l==0&&_.value==1)return"width:400px"},z=r(),ue=l=>{z.value=l},de=l=>{N.value=1,O.value=0,setTimeout(()=>{O.value=1},0),_.value=0,D.value=0,y.value=l,k.value=l,l==null&&(l=z.value),u=[];for(let e=0;e<n.Calendar.length;e++)new Date(l)>=new Date(n.Calendar[e].startTime)&&new Date(l)<=new Date(n.Calendar[e].endTime)&&(u.push(n.Calendar[e]),T.value=e);h.value=new Date(l),F.value=0,setTimeout(()=>{F.value=1}),w=[],S()},ne=r("font-size:40px;rotate: 0deg"),ae=r(0),J=()=>{ae.value++,ne.value="font-size:40px;rotate:"+ae.value*180+"deg",Y(),w=[],S(),g.value=1,setTimeout(()=>{g.value=0})};let L=Z([]);const G=()=>{if(s!=null)for(let l=0;L.length<s.subaim.length;l++)L.push({pointerStyle:"font-size:24px;opacity: 1;",deleteRound:"margin-left:0;opacity: 1"})};G();const ve=l=>{L.splice(l,1),s.subaim.splice(l,1)},I=r(""),se=()=>{I.value&&(L.push({pointerStyle:"font-size:24px;opacity: 1;",deleteRound:"margin-left:0;opacity: 1"}),s.subaim.push({text:I.value,remove:0})),I.value=""},R=Z([]),H=()=>{for(let l=0;R.length<n.Calendar.length;l++)n.Calendar[l].remove?R.push({pointerStyle:"font-size:24px;opacity: 1;",deleteLine:"text-decoration:line-through",deleteRound:"margin-left:0;opacity: 1"}):R.push({pointerStyle:"font-size:0px;opacity: 0;",deleteLine:"text-decoration:none",deleteRound:"margin-left: 40px;opacity: 0"});w=[],S()};H();const fe=l=>{Me.emit("bindCalendar",l)},xe=l=>{_.value=0,D.value=0,n.time.bindCalendar&&ce.name=="TaskCalendar"&&fe(u[l].name),R.splice(l,1),n.Calendar.splice(n.Calendar.findIndex(a=>a.name==u[l].name),1);let e=z.value;u=[];for(let a=0;a<n.Calendar.length;a++)new Date(e)>=new Date(n.Calendar[a].startTime)&&new Date(e)<=new Date(n.Calendar[a].endTime)&&(u.push(n.Calendar[a]),T.value=a);w=[],S(),J()},P=r(1),me=()=>{for(let e=0;e<n.Calendar.length;e++)if(n.Calendar[e].name=="新增任务")return;R.push({pointerStyle:"font-size:0px;opacity: 0;",deleteLine:"text-decoration:none",deleteRound:"margin-left: 40px;opacity: 0"}),n.Calendar.push({startTime:z.value,endTime:z.value,taskclass:"Calendar",name:"新增任务",class:"生活",index:5,note:"",subaim:[],document:{},remove:0});let l=z.value;u=[];for(let e=0;e<n.Calendar.length;e++)new Date(l)>=new Date(n.Calendar[e].startTime)&&new Date(l)<=new Date(n.Calendar[e].endTime)&&(u.push(n.Calendar[e]),T.value=e);w=[],S(),J(),P.value=0,setTimeout(()=>{P.value=1})},pe=l=>{D.value=0,setTimeout(()=>{D.value=1}),_.value=1,y.value=u[l].startTime,k.value=u[l].endTime,s=u[l],T.value=l,X(),W(),L=[],G(),g.value=0,setTimeout(()=>{g.value=1}),w=[],S()},be=l=>{let e=0;for(let a=0;a<n.Calendar.length;a++)(n.Calendar[a].name==l||l=="")&&e++;e==2&&(s.name="新增任务")},Q=r(""),he=()=>{s.class=="生活"?s.class="工作":s.class="生活"},W=()=>{s!=null&&(s.class=="生活"?Q.value="🎉":Q.value="👔")};W();const c=r(0),x=r(""),ge=r(1),ye=()=>{x.value="visibility: hidden;"},X=()=>{if(s!=null)switch(s.index){case 0:x.value="visibility: visible;background-color:#252525";break;case 1:x.value="visibility: visible;background-color:#00ff3c";break;case 2:x.value="visibility: visible;background-color:#39ff00";break;case 3:x.value="visibility: visible;background-color:#bbff00";break;case 4:x.value="visibility: visible;background-color:#ffed00";break;case 5:x.value="visibility: visible;background-color:#ffc700";break;case 6:x.value="visibility: visible;background-color:#ffb900";break;case 7:x.value="visibility: visible;background-color:#ff9200";break;case 8:x.value="visibility: visible;background-color:#ff5c00";break;case 9:x.value="visibility: visible;background-color:#ff2500";break;case 10:x.value="visibility: visible;background-color:#ff003d";break;default:x.value="visibility: visible;background-color:#252525";break}},ke=l=>{switch(u[l].index){case 0:return"visibility: visible;background-color:#252525";case 1:return"visibility: visible;background-color:#00ff3c";case 2:return"visibility: visible;background-color:#39ff00";case 3:return"visibility: visible;background-color:#bbff00";case 4:return"visibility: visible;background-color:#ffed00";case 5:return"visibility: visible;background-color:#ffc700";case 6:return"visibility: visible;background-color:#ffb900";case 7:return"visibility: visible;background-color:#ff9200";case 8:return"visibility: visible;background-color:#ff5c00";case 9:return"visibility: visible;background-color:#ff2500";case 10:return"visibility: visible;background-color:#ff003d";default:return"visibility: visible;background-color:#252525"}},_e=()=>{document.addEventListener("keyup",function(l){l.key=="Enter"&&se()})},ie=r(),re=r(),we=()=>{ie.value=y.value},Ce=()=>{re.value=k.value},je=l=>{l>k.value?y.value=ie.value:(y.value=l,u[T.value].startTime=y.value,d()),Y()},De=l=>{new Date(l.getTime()+1e3*60*60*24-1)<y.value?k.value=re.value:(k.value=new Date(l.getTime()+1e3*60*60*24-1),u[T.value].endTime=k.value,d()),Y(),g.value=0,setTimeout(()=>{g.value=1})};return(l,e)=>{const a=K("el-calendar"),b=K("el-date-picker"),U=K("el-button"),$=K("el-upload");return v(),f("div",Fe,[g.value?(v(),f("div",Ie)):C("",!0),t("div",Re,[t("div",{id:"date",class:"my-[30px] select-none overflow-auto text-[--theme-text-major-color] transition-all",style:M(oe(1))},[B(a,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=o=>h.value=o)},{"date-cell":ee(({data:o})=>[P.value%2==1?(v(),f("div",{key:0,class:"flex flex-col w-full h-full overflow-auto",onClick:m=>(de(o.day),ue(o.day),d())},[t("p",Be,j(o.day.split("-").slice(2).join("-")),1),(v(!0),f(te,null,le(i(w)[parseInt(o.day.split("-").slice(2).join("-"))],(m,V)=>(v(),f("div",{key:V},[F.value?(v(),f("div",Ee,[new Date(o.day).getMonth()==h.value.getMonth()?(v(),f("div",Oe,j(m),1)):C("",!0)])):C("",!0)]))),128))],8,Ue)):C("",!0)]),_:1},8,["modelValue"])],4),O.value%2==1?(v(),f("div",{key:0,id:"list",class:"my-[30px] overflow-auto relative",style:M(oe(0))},[t("div",Ne,[t("div",Ye,[t("div",null,[t("p",Je,j(h.value.getFullYear()+"年"+(h.value.getMonth()+1)+"月"+h.value.getDate()+"日"),1),Ke]),t("div",{class:"text-[--theme-text-major-color] font-black flex items-center select-none hover:text-[#e42a28]",onClick:e[1]||(e[1]=o=>(O.value=0,D.value=0,N.value=0,_.value=0))},Ae)]),t("div",Ge,[(v(!0),f(te,null,le(i(u),(o,m)=>(v(),f("div",{class:"flex justify-between w-full my-[5px] relative select-none transition-all",key:m},[t("div",He,[t("div",{class:"bg-[--theme-background-major-color] flex items-center h-[35px] focus:outline-0 rounded cursor-pointer",onClick:V=>(pe(m),d())},[t("div",{class:"w-[15px] h-[15px] ml-[2px] mr-[16px] rounded-3xl",style:M(ke(m))},null,4),t("div",Qe,j(o.name),1),t("div",We,[t("p",Xe,j(o.note),1)])],8,Pe)]),t("div",{class:"w-[24px] cursor-pointer text-[22px]",onClick:V=>(xe(m),d())},tt,8,Ze)]))),128)),t("div",lt,[t("div",ot,[t("div",nt,[t("div",{class:"outline outline-2 w-[50px] h-[50px] z-10 select-none cursor-pointer rounded-3xl flex items-center justify-center",onClick:e[2]||(e[2]=o=>(me(),d()))},st)]),t("div",it,[t("div",{class:"outline outline-2 w-[50px] h-[50px] z-10 select-none cursor-pointer rounded-3xl flex items-center justify-center",onClick:e[3]||(e[3]=o=>(J(),d()))},[t("i",{class:"iconfont activeSpecial",style:M(ne.value)},"",4)])])])])])])],4)):C("",!0),D.value%2==1?(v(),f("div",rt,[i(s)!=null?(v(),f("div",ct,[t("div",ut,[t("p",dt,[q(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=o=>i(s).name=o),class:"bg-[--theme-background-major-color] focus:bg-[--theme-text-major-color-input] h-[35px] focus:outline-0 rounded px-[10px] ml-[-10px]",onKeyup:e[5]||(e[5]=o=>be(i(s).name)),onBlur:e[6]||(e[6]=o=>(J(),d()))},null,544),[[A,i(s).name]])]),t("div",{class:"text-[--theme-text-major-color] font-black mx-[10px] flex items-center select-none hover:text-[#e42a28]",onClick:e[7]||(e[7]=o=>(D.value=0,_.value=0))},ft)]),t("div",xt,[t("div",{class:"w-[100px] h-[40px] bg-[--theme-text-major-color-input] mr-[10px] flex justify-center items-center rounded-3xl text-[--theme-text-major-color] hover:bg-[--theme-class-major-color-hover] active:text-[--theme-text-major-color-active]",onClick:e[8]||(e[8]=o=>(he(),W(),d()))},[t("p",null,j(Q.value),1),t("p",null,j(i(s).class),1)]),t("div",{class:"w-[40px] h-[40px] bg-[--theme-text-major-color-input] flex justify-center items-center rounded-3xl text-[--theme-color] hover:w-[300px] transition-all duration-700 relative overflow-hidden",onMouseover:e[20]||(e[20]=o=>ye()),onMouseleave:e[21]||(e[21]=o=>X())},[t("div",{class:"w-full h-full z-10 rounded-3xl absolute opacity-100 hover:opacity-0 transition-all duration-700",style:M(x.value)},null,4),t("div",{class:"w-full h-full flex justify-start",onClick:e[19]||(e[19]=o=>d())},[t("div",{class:"h-full w-[10%] bg-[#00ff3c] active:bg-[#00cc2f]",style:{"border-radius":"50% 0 0 50%"},onClick:e[9]||(e[9]=o=>(c.value=1,i(s).index=c.value))}),t("div",{class:"h-full w-[10%] bg-[#39ff00] active:bg-[#2dcc00]",onClick:e[10]||(e[10]=o=>(c.value=2,i(s).index=c.value))}),t("div",{class:"h-full w-[10%] bg-[#bbff00] active:bg-[#95cc00]",onClick:e[11]||(e[11]=o=>(c.value=3,i(s).index=c.value))}),t("div",{class:"h-full w-[10%] bg-[#ffed00] active:bg-[#ccbd00]",onClick:e[12]||(e[12]=o=>(c.value=4,i(s).index=c.value))}),t("div",{class:"h-full w-[10%] bg-[#ffc700] active:bg-[#cc9f00]",onClick:e[13]||(e[13]=o=>(c.value=5,i(s).index=c.value))}),t("div",{class:"h-full w-[10%] bg-[#ffb900] active:bg-[#cc9300]",onClick:e[14]||(e[14]=o=>(c.value=6,i(s).index=c.value))}),t("div",{class:"h-full w-[10%] bg-[#ff9200] active:bg-[#cc7400]",onClick:e[15]||(e[15]=o=>(c.value=7,i(s).index=c.value))}),t("div",{class:"h-full w-[10%] bg-[#ff5c00] active:bg-[#cc4900]",onClick:e[16]||(e[16]=o=>(c.value=8,i(s).index=c.value))}),t("div",{class:"h-full w-[10%] bg-[#ff2500] active:bg-[#cc1d00]",onClick:e[17]||(e[17]=o=>(c.value=9,i(s).index=c.value))}),t("div",{class:"h-full w-[10%] bg-[#ff003d] active:bg-[#cc0030]",style:{"border-radius":"0 50% 50% 0"},onClick:e[18]||(e[18]=o=>(c.value=10,i(s).index=c.value))})]),ge.value?(v(),f("p",mt,"优先级："+j(i(s).index),1)):C("",!0)],32)]),t("div",pt,[t("div",bt,[t("div",ht,[t("div",gt,[B(b,{modelValue:y.value,"onUpdate:modelValue":e[22]||(e[22]=o=>y.value=o),type:"date",placeholder:"选择起始时间","prefix-icon":"none",clearable:!1,onFocus:we,onChange:je},null,8,["modelValue"])])])]),yt,t("div",kt,[t("div",_t,[t("div",null,[B(b,{modelValue:k.value,"onUpdate:modelValue":e[23]||(e[23]=o=>k.value=o),type:"date",placeholder:"选择结束时间","prefix-icon":"none",clearable:!1,onFocus:Ce,onChange:De},null,8,["modelValue"])])])])]),t("div",wt,[Ct,q(t("input",{type:"text",placeholder:"➕在这里输入备注","onUpdate:modelValue":e[24]||(e[24]=o=>i(s).note=o),class:"bg-[--theme-background-major-color] focus:bg-[--theme-text-major-color-input] h-[35px] focus:outline-0 rounded px-[10px] mx-[-10px]",onBlur:e[25]||(e[25]=o=>d())},null,544),[[A,i(s).note]])]),t("div",jt,[Dt,t("div",Tt,[(v(!0),f(te,null,le(i(s).subaim,(o,m)=>(v(),f("div",{class:"flex w-full items-center my-[5px] relative select-none",key:m},[q(t("input",{type:"text","onUpdate:modelValue":V=>o.text=V,class:"w-full bg-[--theme-background-major-color] h-[35px] focus:outline-0 rounded",onBlur:e[26]||(e[26]=V=>d())},null,40,St),[[A,o.text]]),t("div",{class:"w-[24px] cursor-pointer text-[22px]",onClick:V=>(ve(m),d())},[t("i",{class:"iconfont",style:M(i(L)[m].deleteRound)},"",4)],8,$t)]))),128)),t("div",Vt,[q(t("input",{type:"text","onUpdate:modelValue":e[27]||(e[27]=o=>I.value=o),placeholder:"添加新的子任务",class:"w-full bg-[--theme-text-major-color-input] h-[35px] focus:outline-0 rounded px-[2px]",onKeyup:e[28]||(e[28]=o=>(_e(),d()))},null,544),[[A,I.value]]),t("div",zt,[t("div",{class:"outline outline-2 w-[18px] h-[18px] z-10 select-none cursor-pointer rounded-3xl flex items-center justify-center",onClick:e[29]||(e[29]=o=>(se(),d()))},Mt)])])])]),t("div",Ft,[It,B($,{class:"w-full min-w-[330px]",action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15",multiple:""},{default:ee(()=>[t("div",Rt,[B(U,{color:"--theme-background-major-color",class:"w-full min-w-[330px]",type:"primary"},{default:ee(()=>[Ut]),_:1})])]),_:1})])])):C("",!0)])):C("",!0)])])}}},Nt=Te(Bt,[["__scopeId","data-v-41d30a1a"]]);export{Nt as default};
